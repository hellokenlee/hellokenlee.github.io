<!DOCTYPE html>
<head>
	<title>HelloKenLee-Blog</title>
	<!-- mathjax config similar to math.stackexchange -->
	<script type="text/x-mathjax-config">
	MathJax.Hub.Config({
	    jax: ["input/TeX", "output/HTML-CSS"],
	    tex2jax: {
	        inlineMath: [ ['$', '$'] ],
	        displayMath: [ ['$$', '$$']],
	        processEscapes: true,
	        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
	    },
	    messageStyle: "none",
	    "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
	});
	</script>
	<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<html>
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Leetcode 33 Search in Rotated Sorted Array 解题报告</title>

	<link rel="shortcut icon" href="/styles/images/favicon.jpg">
	<link rel="icon" href="/styles/images/favicon.jpg">

	<link rel="stylesheet" href="/styles/css/syntax.css">
	<link rel="stylesheet" href="/styles/css/index.css">
	<link rel="stylesheet" href="/styles/css/fontawesome/css/font-awesome.min.css">
	<link rel="canonical" href="/2017/02/26/leetcode-33/">
	<link rel="alternate" type="application/rss+xml" title="HelloKenLee" href="/feed.xml">
	
	<meta name="description" content="meta_des">

	<script src="/styles/js/jquery.min.js"></script>
	<!--[if lt IE 9]>
    	<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  	<![endif]-->
  	<script>
		var _hmt = _hmt || [];
		(function() {
		  var hm = document.createElement("script");
		  hm.src = "//hm.baidu.com/hm.js?94be4b0f9fc5d94cc0d0415ea6761ae9";
		  var s = document.getElementsByTagName("script")[0]; 
		  s.parentNode.insertBefore(hm, s);
		})();
	</script>
  	<style type="text/css">
	  	.docs-content{
	  		margin-bottom: 10px;
	  	}
  	</style>
</head>
	<body class="index">
		<header class="navbar navbar-inverse navbar-fixed-top docs-nav" role="banner">
  <div class="container">
	<div class="navbar-header">
	  <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
		<span class="icon-bar"></span>
		<span class="icon-bar"></span>
		<span class="icon-bar"></span>
	  </button>
	  <a href="/" class="navbar-brand">
		<img src="/styles/images/logo.jpg">
	  </a>
	</div>
	<nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
	  <ul class="nav navbar-nav">	
		<li>
		  <a href="/">首页</a>
		</li>
		<li>
		  <a href="/categories/">分类</a>
		</li>
		<li>
		  <a href="/tag/">标签</a>
		</li>
		<li>
		  <a href="/isaac/">以撒</a>
		</li>
	  </ul>
	  <ul class="nav navbar-nav navbar-right">
		<li class="dropdown">
		  <a href="#" class="dropdown-toggle" data-toggle="dropdown">关于<b class="caret"></b></a>
		  <ul class="dropdown-menu">
			<li><a rel="nofollow" target="_blank" href="/resume/">AboutMe</a></li>
			<li class="divider"></li>
			<li><a rel="nofollow" target="_blank" href="https://github.com/hellokenlee/">Github</a></li>
			<li><a rel="nofollow" href="/reference/">Links</a></li>
			<li><a href="/feed.xml">Feed</a></li>
		  </ul>
		</li>
	  </ul>
	</nav>
  </div>
</header>

		<div class="docs-header" id="content">
  <div class="container">
  	
		    <h1>HelloKenLee</h1>
    
  </div>
</div>
		
			
<div class="banner">
  <div class="container">
  	
    	<a href="/categories/#算法课解题报告-ref">算法课解题报告</a>	/
    	<a href="/tag/#-ref"></a>
    
  </div>
</div>

		

		<style type="text/css">
	img{
		text-align: center;
		clear: both;
		display: block;
		margin: auto;
	}
</style>
<div class="container docs-container">
	<div class="row">
		<div class="col-md-3">
			<div class="sidebar hidden-print" role="complementary">
				<div id="navigation">
  <h1>目录</h1>
  <ul class="nav sidenav">
<!--
    
      
      
      
      

      
        <li><a href="#year_2017">2017</a>
          <ul class="nav">
            <li><a href="#month_2017_July">July</a></li>
      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2017_June">June</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2017_May">May</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2017_April">April</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2017_March">March</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2017_February">February</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
        
            </ul>
          </li>
          <li><a href="#year_2016">2016</a>
            <ul class="nav">
              <li><a href="#month_2016_December">December</a></li>
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2016_November">November</a></li>
          
        
      
    
      
      
      
      

      

      
            </ul>
          </li>
      
    
-->
  </ul>
</div> 
			</div>
		</div>
		<div class="col-md-9" role="main">
			<div class="panel docs-content">
				<div class="wrapper">
						<header class="post-header">
							<h1 class="post-title">Leetcode 33 Search in Rotated Sorted Array 解题报告</h1>
							<div class="meta">Posted on <span class="postdate">Feb 26, 2017</span> By <a target="_blank" href="http://localhost:4000">KenLee</a></div>
							<br />
						</header>
						<article class="post-content">
							<ul id="markdown-toc">
  <li><a href="#题目信息" id="markdown-toc-题目信息">题目信息</a>    <ul>
      <li><a href="#题目-33-search-in-rotated-sorted-array" id="markdown-toc-题目-33-search-in-rotated-sorted-array">题目： <a href="https://leetcode.com/problems/search-in-rotated-sorted-array/">33. Search in Rotated Sorted Array</a></a></li>
      <li><a href="#难度-medium" id="markdown-toc-难度-medium">难度： Medium</a></li>
      <li><a href="#正确率-3208" id="markdown-toc-正确率-3208">正确率： 32.08%</a></li>
      <li><a href="#问题描述" id="markdown-toc-问题描述">问题描述:</a></li>
    </ul>
  </li>
  <li><a href="#问题分析" id="markdown-toc-问题分析">问题分析</a></li>
  <li><a href="#解题思路" id="markdown-toc-解题思路">解题思路</a></li>
  <li><a href="#主要数据结构" id="markdown-toc-主要数据结构">主要数据结构</a></li>
  <li><a href="#源代码" id="markdown-toc-源代码">源代码</a></li>
</ul>

<h3 id="题目信息">题目信息</h3>

<h4 id="题目-33-search-in-rotated-sorted-array">题目： <a href="https://leetcode.com/problems/search-in-rotated-sorted-array/">33. Search in Rotated Sorted Array</a></h4>

<h4 id="难度-medium">难度： Medium</h4>

<h4 id="正确率-3208">正确率： 32.08%</h4>

<h4 id="问题描述">问题描述:</h4>

<p>Suppose an array sorted in ascending order is rotated at some pivot unknown to you beforehand.<br />
(i.e., 0 1 2 4 5 6 7 might become 4 5 6 7 0 1 2).<br />
You are given a target value to search. If found in the array return its index, otherwise return -1. <br />
You may assume no duplicate exists in the array.</p>

<h3 id="问题分析">问题分析</h3>
<p>　　问题的大意是说，把一个升序的数组以某一个数为中心”旋转”以后得到一个数组，在这个数组中查找一个数，如果能查找到，就返回它的下标，如果不能查找到，就返回-1。
　　一开始我没怎么理解这个“旋转”的含义，其实就是说，选定一个数，然后把整一个数组循环左移(右移也行)到这个数作为第一个，把左移溢出的数放在数组右边。
　　比如[0,1,2,4,5,6,7]，假设我们选择的数是4,那么“旋转的”过程如下:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>	-&gt;[1,2,4,5,6,7,0] //把0循环左移，补到最右边
	-&gt;[2,4,5,6,7,0,1] //把1循环左移，补到0的右边
	-&gt;[4,5,6,7,0,1,2] //把2循环左移，补到1的右边,这时候4是第一位，结束。
</code></pre>
</div>
<h3 id="解题思路">解题思路</h3>
<p>　　首先这是一个查找问题，最简单的思路当然是扫一次出结果，时间复杂度为O(N)。我们且不提想要sort()一次再二分的那些自寻烦恼的思路(XD)。但是这种朴素的解法完全没有利用到题目给的信息，因为对于一个完全没有序的数组，我们也能扫一次出结果。因此这种解法肯定是TLE的。</p>

<p>　　那么我们再观察一下样例数据，本身数组是有序的，经过了“旋转”之后尽管不是全局有序，但是起码是部分有序的，比如说第0位到第4位[4,5,6,7]是有序的，第5位到最后[0,1,2]也是有序的。那么一个简单的改进就是我扫前半部分[4,5,6,7]，如果找到了，返回，如果没找到，则我知道后面的[0,1,2]也是有序的了，然后在后面的数据中采用二分查找。然而，这种解法尽管在最好的情况下是O(lgN)，在平均和最坏的复杂度都是O(N)，如无意外也是TLE的。</p>

<p>　　上述的想法其实相当于把原数组分成了两部分[A,B]，我们在A中使用扫描，在B中使用二分。那么能不能在A中也使用二分呢？因为原升序的数列可以写成[B,A]，现在我们要进行查找的数列是[A,B]，我们可以知道，B中的每一个数都比A小。 更确切来说，<strong>B中的每一个数都比A[0]小，A中的每一个元素都比A[0]大！</strong> 有了这个条件，如果我们要找一个数X，如果X小于A[0],我们就应该在B中进行二分查找，若大于A[0]，我们则应该在A中进行查找。那么现在剩下的问题是，我们无法以常数时间区分A和B，因此，我们应该直接在整个数组中进行二分查找。和平时二分查找不同的是，假设我们要找的目标在A中，我们的mid命中了B中的数，我们应该把命中的数当作无限大处理；反之，如果我们命中了A的数，我们应该把它当作无限小来处理。举个例子：</p>
<div class="highlighter-rouge"><pre class="highlight"><code>	nums=[4,5,6,7,0,1,2];
</code></pre>
</div>
<p>　　如果我们要查找的数比nums[0]=4小(比如1)，我们相当于在<code class="highlighter-rouge">[-oo,-oo,-oo,-oo,0,1,2]</code>中查找；反正，如果我们要找的数比nums[0]=4大(比如6)，我们相当于在<code class="highlighter-rouge">[4,5,6,7,+oo,+oo,+oo]</code>中进行查找。
　　分析：二分查找每一次选取一个mid来和target进行比较，每次名字比较一次，总体时间复杂度为O(log2(N))；上述的二分查找除了需要和target比较以外，还需要和A[0]比较，因此最坏比较次数3次，时间复杂为O(3log2(N))，也就是O(lgN)。
　　这应该是比较优化的做法了，提交代码，最终通过时间为3ms，比80%的提交者优秀且和最佳成绩相差不足1ms，姑且认为是服务器状态差异。</p>
<h3 id="主要数据结构">主要数据结构</h3>
<p>　　- <code class="highlighter-rouge">vector&lt;int&gt; nums</code>：输入数组
　　- <code class="highlighter-rouge">int target</code>：需要查找的目标
　　- <code class="highlighter-rouge">int left</code>：二分查找左边界下标
　　- <code class="highlighter-rouge">int right</code>：二分查找右边界下标
　　- <code class="highlighter-rouge">int midNum</code>：二分查找的中间元素的值</p>
<h3 id="源代码">源代码</h3>
<div class="language-cpp highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="kt">int</span> <span class="n">search</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">left</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">right</span><span class="o">=</span><span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">right</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">left</span><span class="o">&lt;</span><span class="n">right</span><span class="p">){</span>
            <span class="kt">int</span> <span class="n">mid</span><span class="o">=</span><span class="p">(</span><span class="n">left</span><span class="o">+</span><span class="n">right</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">midNum</span><span class="o">=</span><span class="n">nums</span><span class="p">[</span><span class="n">mid</span><span class="p">];</span>
            <span class="k">if</span><span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span><span class="o">&gt;</span><span class="n">nums</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">target</span><span class="o">&lt;</span><span class="n">nums</span><span class="p">[</span><span class="mi">0</span><span class="p">]){</span>
                <span class="c1">//要找的数比nums[0]小(比如上面的2)但是nums[mid]又比nums[0]大，比如上面的7，那我们把midNum看做-oo
</span>                <span class="n">midNum</span><span class="o">=</span><span class="n">INT_MIN</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span><span class="o">&lt;</span><span class="n">nums</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">target</span><span class="o">&gt;=</span><span class="n">nums</span><span class="p">[</span><span class="mi">0</span><span class="p">]){</span>
                <span class="c1">//要找的数比nums[0]大，但是nums[mid]又比nums[0]小，那我们把midNum看做+oo
</span>                <span class="n">midNum</span><span class="o">=</span><span class="n">INT_MAX</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="n">target</span><span class="o">&gt;</span><span class="n">midNum</span><span class="p">){</span>
                <span class="n">left</span><span class="o">=</span><span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">target</span><span class="o">&lt;</span><span class="n">midNum</span><span class="p">){</span>
                <span class="n">right</span><span class="o">=</span><span class="n">mid</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                <span class="k">return</span> <span class="n">mid</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre>
</div>

						</article>
				</div>
			</div>
			<div class="panel docs-content">
				<article class="post-content">
					<div class="wrapper">
						


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'hellokenlee'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>


 
					</div>
				</article>
			</div>
		</div>
	</div>
</div>

		<footer class="footer" role="contentinfo">
	<div class="container" style="text-align: center;">
		<p class="copyright">Copyright &copy; 2014-2017 <a href="/resume/"><code>KenLee</code></a>.</p>
		<p>Powered by <a href="http://jekyllrb.com">Jekyll</a>, theme from <a href="http://lesscss.cn/">Less</a></p>
	</div>
</footer>

<script src="/styles/js/jquery.min.js"></script>
<script src="/styles/js/bootstrap.min.js"></script>
<script src="/styles/js/holder.min.js"></script>
<script src="/styles/js/application.js"></script>
<script src="/styles/js/lessismore.js"></script>
	</body>
</html>
